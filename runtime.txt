def main():
    print("\n" + "="*60)
    print(f"BONDLY BOT v{BOT_VERSION} - PROFESSIONAL EDITION")
    print("="*60)
    
    try:
        # Try v20+ API first
        from telegram.ext import Application
        app = Application.builder().token(TOKEN).build()
        print("Using python-telegram-bot v20+ API")
        
        # ... your existing v20 code ...
        
        app.run_polling(drop_pending_updates=True)
        
    except AttributeError:
        # Fall back to v13 API
        print("Falling back to python-telegram-bot v13 API")
        from telegram.ext import Updater, Filters
        
        updater = Updater(TOKEN, use_context=True)
        dp = updater.dispatcher
        
        # Use v13 API handlers (Filters instead of filters)
        # ... convert your handlers to v13 format ...
        
        updater.start_polling()
        updater.idle()
